version: "2.0"

# Stories for 2 users (strict patterns)

stories:

- story: from opening to task
  steps:
  - intent: opening
  - slot_was_set:
    - task_activated: false
  - action: action_greet_user_by_name
  - action: utter_task_introduction
  - action: utter_question_suggestions
  - action: action_set_task_slot
  - slot_was_set:
    - task_activated: true

- story: from no introduction to task
  steps:
  - or:
    - intent: closing
    - intent: suggest_artist
    - intent: likes_artist
    - intent: dislikes_artist
    - intent: request_for_suggestion_from_bot
    - intent: suggestion_to_make_decision
    - intent: suggestion_for_decision
    - intent: agreement
    - intent: disagreement
  - slot_was_set:
    - task_activated: false  
  - action: utter_task_introduction
  - action: utter_question_suggestions
  - action: action_set_task_slot
  - slot_was_set:
    - task_activated: true

- story: handle user introducing task
  steps:
  - intent: task_introduction
  - slot_was_set:
    - task_activated: false
  - action: utter_question_suggestions
  - action: action_set_task_slot
  - slot_was_set:
    - task_activated: true

# Testing introduction form for multi-user chat
    
# - story: from opening to task
#   steps:
#   - intent: opening
#   - slot_was_set:
#     - task_activated: false
#   - action: introduction_form
#   - active_loop: introduction_form
#   - slot_was_set:
#     - requested_slot: introductions_finished
#   - slot_was_set:
#     - introductions_finished
#   - slot_was_set:
#     - counter
#   - active_loop: null
#   - slot_was_set:
#     - requested_slot: null  
#   - action: utter_nice_to_meet_you
#   - action: utter_task_introduction
#   - action: utter_question_suggestions
#   - action: action_set_task_slot
#   - slot_was_set:
#     - task_activated: true

- story: user suggests artist
  steps:
  - intent: suggest_artist
  - slot_was_set:
    - task_activated: true
    - artist
  - action: action_set_genre_slot
  - slot_was_set:
    - genre
  - action: action_set_opinion_slot_as_good
  - slot_was_set:
    - opinion
  - action: action_delayed_positive_evaluation

- story: request suggestion after dismissal
  steps:
  - intent: dismissing_claim
  - action: utter_request_suggestion

- story: user likes artist path
  steps:
  - intent: likes_artist
  - slot_was_set:
    - task_activated: true
  - action: action_set_genre_slot
  - slot_was_set:
    - genre
  - action: action_set_opinion_slot_as_good
  - slot_was_set:
    - opinion
  - action: action_delayed_positive_evaluation

- story: user dislikes artist path
  steps:
  - intent: dislikes_artist
  - slot_was_set:
    - task_activated: true
  - action: action_set_genre_slot
  - slot_was_set:
    - genre
  - action: action_set_opinion_slot_as_bad
  - slot_was_set:
    - opinion
  - action: utter_artist_praise

- story: user praises artist
  steps:
  - intent: praising_claim
  - slot_was_set:
    - task_activated: true
  - action: action_set_opinion_slot_as_good
  - slot_was_set:
    - opinion
  - action: action_handle_claim

# - story: user dismisses artist
#   steps:
#   - intent: dismissing_claim
#   - slot_was_set:
#     - task_activated: true
#   - action: action_set_opinion_slot_as_bad
#   - slot_was_set:
#     - opinion
#   - action: action_handle_claim

- story: user asks the bot for its opinion
  steps:
  - intent: request_for_suggestion_from_bot
  - slot_was_set:
    - task_activated: true
  - action: action_deflect_opinion_question

- story: bs after task introduction
  steps:
  - or: 
    - intent: opening
    - intent: self_introduction
  - slot_was_set:
    - task_activated: true
  - action: utter_back_to_task

- story: start decision phase auto-success
  steps:
  - intent: suggestion_to_make_decision
  - slot_was_set:
    - task_activated: true
  - action: utter_agreement
  - action: action_set_decision_phase
  - slot_was_set:
    - decision_phase: true

- story: user suggests decision auto-fail
  steps:
  - intent: suggestion_for_decision
  - slot_was_set:
    - task_activated: true
    - decision_phase: true
    - artist
  - action: utter_reject_claim

- story: user suggests decision before decision phase
  steps: 
  - intent: suggestion_for_decision
  - slot_was_set:
    - task_activated: true
    - decision_phase: false
  - action: utter_back_to_task

- story: user gets tired
  steps:
  - intent: closing
  - slot_was_set:
    - task_activated: true
  - action: utter_closing

- story: get genre data
  steps: 
    - intent: get_genre
    - action: action_set_genre_slot
    - slot_was_set:
      - genre
    - action: utter_genre
